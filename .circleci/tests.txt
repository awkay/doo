# -*- sh -*-

# Each non-comment line of this file is a shell command that will be run in the
# example directory.

# Karma
lein doo browsers test once
lein doo browsers advanced once
lein doo browsers none-test once
# Phantom
lein doo phantom test once
lein doo phantom advanced once
lein doo phantom none-test once
# Slimer
lein doo slimer test once
lein doo slimer advanced once
lein doo slimer none-test once
# Chrome Headless
lein doo chrome-headless test once
lein doo chrome-headless advanced once
lein doo chrome-headless none-test once
# Rhino
# rhino doesn't support :optimizations :none
lein doo rhino test once
lein doo rhino advanced once
# Nashorn
# nashorn doesn't support :optimizations :none
lein doo nashorn test once
lein doo nashorn advanced once
# Node
lein doo node node-none once
lein doo node node-advanced once
# Karma Phantom
lein doo karma-phantom test once
lein doo karma-phantom advanced once
lein doo karma-phantom none-test once
# Karma Slimer
lein doo karma-slimer test once
lein doo karma-slimer advanced once
lein doo karma-slimer none-test once
# Electron
lein doo electron test once
lein doo electron advanced once
lein doo electron none-test once
# Boot
boot add-tests test-cljs -e phantom -x
boot add-tests test-cljs -e phantom -x -O advanced

# These ones should fail
# Karma
lein doo browsers test-fail once && exit 1 || exit 0
lein doo browsers advanced-fail once && exit 1 || exit 0
lein doo browsers none-test-fail once && exit 1 || exit 0
# Phantom
lein doo phantom test-fail once && exit 1 || exit 0
lein doo phantom advanced-fail once && exit 1 || exit 0
lein doo phantom none-test-fail once && exit 1 || exit 0
# Slimer
# lein doo slimer test-fail once && exit 1 || exit 0
# lein doo slimer advanced-fail once && exit 1 || exit 0
# lein doo slimer none-test-fail once && exit 1 || exit 0
# Chrome Headless
lein doo chrome-headless test-fail once && exit 1 || exit 0
lein doo chrome-headless advanced-fail once && exit 1 || exit 0
lein doo chrome-headless none-test-fail once && exit 1 || exit 0
# Rhino
lein doo rhino test-fail once && exit 1 || exit 0
lein doo rhino advanced-fail once && exit 1 || exit 0
lein doo rhino none-test-fail once && exit 1 || exit 0
# Nashorn
lein doo nashorn test-fail once && exit 1 || exit 0
lein doo nashorn advanced-fail once && exit 1 || exit 0
lein doo nashorn none-test-fail once && exit 1 || exit 0
# Node
lein doo node node-none-fail once && exit 1 || exit 0
lein doo node node-advanced-fail once && exit 1 || exit 0
# Karma Phantom
lein doo karma-phantom test-fail once && exit 1 || exit 0
lein doo karma-phantom advanced-fail once && exit 1 || exit 0
lein doo karma-phantom none-test-fail once && exit 1 || exit 0
# Karma Slimer
lein doo karma-slimer test-fail once && exit 1 || exit 0
lein doo karma-slimer advanced-fail once && exit 1 || exit 0
lein doo karma-slimer none-test-fail once && exit 1 || exit 0
# Electron
lein doo electron test once-fail && exit 1 || exit 0
lein doo electron advanced-fail once && exit 1 || exit 0
lein doo electron none-test-fail once && exit 1 || exit 0
# Boot
boot add-failures test-cljs -e phantom -x && exit 1 || exit 0
boot add-failures test-cljs -e phantom -x -O advanced && exit 1 || exit 0
